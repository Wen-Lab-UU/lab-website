{{ define "main" }}
<main class="main">

  <!-- HERO: logo and title on separate lines, centered -->
  {{ $h := .Site.Params.homeHero }}
  <section class="home-hero">
    <div align="center">

      {{ with (or $h.imageUrl "img/lab-logo.png") }}
        <img
          src="{{ . | relURL }}"
          alt="{{ or $h.imageTitle "Lab logo" }}"
          width="{{ or $h.imageWidth 160 }}"
          height="{{ or $h.imageHeight 160 }}"
        />
      {{ end }}

      <br />
      <br />

      <h1>{{ or $h.title .Site.Title }}</h1>

      {{ with $h.subtitle }}
        <p>{{ . }}</p>
      {{ end }}

      <!-- space between hero and intro -->
      <br />
      <br />
    </div>
  </section>

  <!-- MAIN INTRO: centered -->
  {{ with .Site.Params.homeIntro.content }}
    <section class="home-intro">
      <div class="home-intro-body">
        {{ $html := . | markdownify }}
        {{ $html = replaceRE "<p>" "<p style=\"text-align:center;\">" $html }}
        {{ $html | safeHTML }}
      </div>
    </section>
  {{ end }}


  <!-- spacing between intro and about -->
  <br />

  <!-- HOME ABOUT: justified -->
  {{ with .Site.Params.homeAbout.content }}
    <section class="home-about">
      <div class="home-about-body" style="max-width:980px; margin:0 auto;">
        {{ $html := . | markdownify }}
        {{ $html = replaceRE "<p>" "<p style=\"text-align:justify; text-justify:inter-word;\">" $html }}
        {{ $html | safeHTML }}
      </div>
    </section>
  {{ end }}


  <!-- spacing before News -->
  <br />
  <br />

  <!-- NEWS (simple, hard-coded; formatted like Funding heading) -->
  <section class="home-funding">
    <div class="home-funding-inner">
      <h2>News</h2>
      <p>2025-03-01 Welcome Zhiwei Li, who joined the laboratory as a PhD student.</p>
    </div>
  </section>

  <!-- spacing before Funding -->
  <br />
  <br />

  <!-- Funding block with image -->
  {{ $f := .Site.Params.homeFunding }}
  {{ if $f }}
    <section class="home-funding">
      <div class="home-funding-inner">
        {{ with $f.title }}<h2>{{ . }}</h2>{{ end }}
        {{ with $f.text }}<p>{{ . }}</p>{{ end }}

       {{ with $f.image }}
  <div class="funding-image-wrap">
    <img
      class="funding-image"
      src="{{ . | relURL }}"
      alt="{{ or $f.imageAlt "Funding" }}"
    />
  </div>
{{ end }}

      </div>
    </section>
  {{ end }}

<style>
  /* Funding image sizing */
  .funding-image-wrap{
    max-width: 980px;      /* match your text width */
    margin: 0 auto;        /* center the whole block */
    text-align: center;
  }
  .funding-image{
    display: inline-block;
    width: 100%;
    max-width: 300px;      /* <- make it smaller here (try 600â€“800) */
    height: auto;
  }
</style>

</main>
{{ end }}
