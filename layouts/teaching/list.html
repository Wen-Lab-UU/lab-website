{{ define "main" }}
<main class="main">
  <article class="post-single">
    <header class="post-header">
      <h1 class="page-title">{{ .Title }}</h1>
    </header>

    {{/* Collect + sort */}}
    {{ $rows := slice }}
    {{ with .Params.courses }}
      {{ range . }}
        {{ $w := 999999 }}
        {{ if isset . "weight" }}{{ $w = int (printf "%v" .weight) }}{{ end }}
        {{ $rows = $rows | append (dict "c" . "w" $w) }}
      {{ end }}
    {{ end }}
    {{ $rows = sort $rows "w" "asc" }}

    <div class="course-list">
      {{ range $rows }}
        {{ $c := .c }}
        <div class="course-item">
          <div class="course-title">
            {{ if and (isset $c "url") (ne $c.url "") }}
              <a href="{{ $c.url }}" target="_blank" rel="noopener">{{ $c.title }}</a>
            {{ else }}
              {{ $c.title }}
            {{ end }}
          </div>

          <div class="course-meta">
            {{ with $c.code }}<span class="course-code">{{ . }}</span>{{ end }}
            {{ if and (isset $c "level") (ne $c.level "") }}
              <span class="course-dot">Â·</span>
              <span class="course-level">{{ $c.level }}</span>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>

  </article>
</main>

<style>
.page-title{
  margin:.2rem 0 1.1rem 0;
  font-size:clamp(1.9rem,2.2vw,2.4rem);
  font-weight:700;
  color:#fff;
}

.course-list{
  display:flex;
  flex-direction:column;
  gap:.7rem;
}

.course-item{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.18);
  border-radius:14px;
  padding:.9rem 1rem;
}

.course-title{
  font-weight:750;
  font-size:1.02rem;
  line-height:1.35;
  color:#fff;
}
.course-title a{
  color:#fff;
  text-decoration:none;
}
.course-title a:hover{
  text-decoration:underline;
}

.course-meta{
  margin-top:.25rem;
  font-size:.9rem;
  opacity:.92;
  color:#fff;
  display:flex;
  gap:.4rem;
  align-items:center;
  flex-wrap:wrap;
}

.course-code{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  padding:.12rem .45rem;
  border-radius:999px;
  font-size:.86rem;
}

.course-dot{ opacity:.7; }
</style>
{{ end }}
