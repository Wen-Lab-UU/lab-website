{{ define "main" }}
<main class="main">
  <article class="post-single">

    {{/* Intentionally no <h1> to match 'years as headings, titles only' */}}

    {{/* Coerce years to ints so sort can't break if someone quotes them */}}
    {{ $years := slice }}
    {{ with .Params.publications }}
      {{ range . }}
        {{ $y := int (printf "%v" .year) }}
        {{ $years = $years | append (dict "year" $y "items" .items) }}
      {{ end }}
    {{ end }}

    {{/* Sort years descending (2025 → 2024 → ...) */}}
    {{ $years = sort $years "year" "desc" }}

    {{ range $years }}
      <h2 class="pub-year">{{ .year }}</h2>
      <ul class="pub-list">
        {{ range .items }}
          <li class="pub-item">
            {{/* Titles only; optional URL/PDF if provided */}}
            {{ if .url }}
              <a href="{{ .url }}" target="_blank" rel="noopener" class="pub-title">{{ .title }}</a>
            {{ else if .pdf }}
              <a href="{{ .pdf | relURL }}" target="_blank" rel="noopener" class="pub-title">{{ .title }}</a>
            {{ else }}
              <span class="pub-title">{{ .title }}</span>
            {{ end }}
          </li>
        {{ end }}
      </ul>
    {{ end }}

  </article>
</main>

<style>
/* Simple compact styling */
.pub-year{ margin-top:1.25rem; }
.pub-list{ margin: .25rem 0 1rem 1.25rem; padding:0; }
.pub-item{ margin: .25rem 0; font-size: 0.95rem; line-height: 1.35; list-style: disc; }
.pub-title{ text-decoration: none; }
</style>
{{ end }}
